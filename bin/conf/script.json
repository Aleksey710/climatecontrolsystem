{
	"data":[
            { "name":"display.BVV.version",         "title":"Версия встроенного ПО БВВ",                "value": -1 },
            { "name":"display.BVV.year",            "title":"Год прошивки",                             "value": -1 },
            { "name":"display.BVV.month",           "title":"Месяц прошивки",                           "value": -1 },
            { "name":"display.BVV.day",             "title":"День прошивки",                            "value": -1 },

            { "name":"display.A9.device",           "title":"Состояние устройства БУТ (А9)",            "value": -1 },
            { "name":"display.A9.version",          "title":"Версия встроенного ПО БУТ",                "value": -1 },
            { "name":"display.A9.year",             "title":"Год прошивки",                             "value": -1 },
            { "name":"display.A9.month",            "title":"Месяц прошивки",                           "value": -1 },
            { "name":"display.A9.day",              "title":"День прошивки",                            "value": -1 },

            { "name":"modbus.Tsal.device",          "title":"Состояние датчика температуры салона",             "value": -1 },
            { "name":"modbus.Tnv.device",           "title":"Состояние датчика температуры наружного воздуха",	"value": -1 },
            { "name":"modbus.Tpr.device",           "title":"Состояние датчика температуры приточного воздуха",	"value": -1 },
            { "name":"modbus.Tkotl.device",         "title":"Состояние датчика температуры котла",              "value": -1 },

            { "name":"modbus.Tsal.r30000",          "title":"",              "value": -1 },
            { "name":"modbus.Tpr.r30000",           "title":"",              "value": -1 },
            { "name":"modbus.Tnv.r30000",           "title":"",              "value": -1 },
            { "name":"modbus.Tkotl.r30000",         "title":"",              "value": -1 },

            { "name":"modbus.BVV.device",         "title":"",              "value": -1 },
            { "name":"modbus.BVV.r40028",         "title":"",              "value": -1 },
            { "name":"modbus.BVV.r40029",         "title":"",              "value": -1 },
            { "name":"modbus.BVV.r40030",         "title":"",              "value": -1 },
            { "name":"modbus.BVV.r40031",         "title":"",              "value": -1 },

            { "name":"modbus.A9.device",         "title":"",              "value": -1 },
            { "name":"modbus.A9.r40001",         "title":"",              "value": -1 },
            { "name":"modbus.A9.r40028",         "title":"",              "value": -1 },
            { "name":"modbus.A9.r40029",         "title":"",              "value": -1 },
            { "name":"modbus.A9.r40030",         "title":"",              "value": -1 },
            { "name":"modbus.A9.r40031",         "title":"",              "value": -1 },

            { "lineComment":"------------------------------------------------------------------------------------------------------" },
            { "lineComment":"Защита от перегрева котла. Запрещает работу насоса и ВВО" },

            { "name":"var.kotl.overheat",           "title":"Признак того, что котел перегрелся",               "value": -1 },
            { "name":"var.kotl.time",               "title":"Время превышения температуры, достигнув которого взведется признак перегрева котла.",   "value": -1 },

            { "lineComment":"------------------------------------------------------------------------------------------------------" },
            { "lineComment":"Переменные алгоритма включения НВО" },

            { "name":"var.timout.dlhon",        "title":"Затримка включення НВО, мСек",                         "value": -1 },
            { "name":"var.timout.dlhoff",       "title":"Затримка виключення НВО, мСек",                        "value": -1 },
            { "name":"var.timout.dlhr",         "title":"Затримка відповіді включення НВО від БВВ, мСек",       "value": -1 },
            { "name":"var.timout.dlh",          "title":"Затримка повторного включення НВО, мСек",              "value": -1 },
            { "name":"var.temp.nvoOn",          "title":"Включение НВО признак для запуска отсчета задержек",   "value": -1 },

            { "lineComment":"------------------------------------------------------------------------------------------------------" },
            { "lineComment":"Переменные алгоритма включения ВВО" },

            { "name":"var.temp.vvokotlon",      "title":"Температура котла необхідна для ввімкненяя ВВО",       "value": -1 },
            { "name":"var.temp.vvokotloff",     "title":"Температура котла необхідна для вимкненя ВВО",         "value": -1 },
            { "name":"var.timout.vvodsd",       "title":"Час простою перед наступним включенням ВВО, мСек",     "value": -1 },
            { "name":"var.timout.vvosod",       "title":"Затримка включення ВВО, мСек",                         "value": -1 },
            { "name":"var.timout.vvord",        "title":"Затримка відповіді включення ВВО від БВВ, мСек",       "value": -1 },
            { "name":"var.temp.vvo1On",         "title":"Включение ВВО 1 гр. признак для запуска отсчета задержек",       "value": -1 },
            { "name":"var.temp.vvo2On",         "title":"Включение ВВО 2 гр. признак для запуска отсчета задержек",       "value": -1 },
            { "name":"var.temp.vvoOn",          "title":"Включение ВВО признак формируется после формирования задержек и необходим для непосредственного управления группами.",       "value": -1 },
            { "name":"var.temp.vvoInvert",      "title":"Смена групп ВВО: false(0) – при включении первой группы вкл. первая; true(1) – при включении первой группы вкл. вторая.",       "value": -1 },

            { "lineComment":"------------------------------------------------------------------------------------------------------" },

            { "name":"out.BVV.vvo1On",          "title":"Включение ВВО 1 гр.",                  "value": -1 },
            { "name":"out.BVV.vvo2On",          "title":"Включение ВВО 2 гр.",                  "value": -1 },
            { "name":"out.BVV.pompOn",          "title":"Включення насоса",                     "value": -1 },
            { "name":"out.BVV.nvoOn",           "title":"Включение НВО",                        "value": -1 },
            { "name":"out.BVV.fault",           "title":"Авария (по Imax, Umax, Umin)",         "value": -1 },
            { "name":"out.BVV.bpOn",            "title":"Включение БП",                         "value": -1 },
            { "name":"out.BVV.pvvOn",           "title":"Повернення (с БВВ привключении)",      "value": -1 },

            { "lineComment":"------------------------------------------------------------------------------------------------------" },
            { "lineComment":"------------------------------------------------------------------------------------------------------" },

            { "name":"modbus.BVV.r30000", 	"title":"Регистр дискретных входов 1 [30000]",		"value": 0 },
            { "name":"modbus.BVV.r30001", 	"title":"Температура воздуха в вагоне [30001]",		"value": 0 },
            { "name":"modbus.BVV.r30002", 	"title":"Температура приточного воздуха [30002]",	"value": 0 },
            { "name":"modbus.BVV.r30003", 	"title":"Температура наружного воздуха [30003]",	"value": 0 },
            { "name":"modbus.BVV.r30004", 	"title":"Температура воды в котле [30004]",		"value": 0 },
            { "name":"modbus.BVV.r30005", 	"title":"Ток АКБ [30005]",				"value": 0 },
            { "name":"modbus.BVV.r30006", 	"title":"Ток генератора [30006]",			"value": 0 },
            { "name":"modbus.BVV.r30007", 	"title":"Напряжение сети [30007]",			"value": 0 },
            { "name":"modbus.BVV.r30008",	"title":"Регистр дискретных входов 2 [30008]",		"value": 0 },

            { "lineComment":"------------------------------------------------------------------------------------------------------" },

            { "name":"modbus.BVV.r30028", 	"title":"Версия встроенного ПО БВВ [30028]", 		"value": 0 },
            { "name":"modbus.BVV.r30029", 	"title":"Год прошивки [30029]", 			"value": 0 },
            { "name":"modbus.BVV.r30030", 	"title":"Месяц прошивки [30030]", 			"value": 0 },
            { "name":"modbus.BVV.r30031", 	"title":"День прошивки [30031]", 			"value": 0 },

            { "lineComment":"------------------------------------------------------------------------------------------------------" },

            { "name":"modbus.BVV.r40000", 	"title":"Регистр дискретных выходов [40000]", 		"value": 0 },
            { "name":"modbus.BVV.r40001", 	"title":"Выходное напряжение канала 1(Коррекция температуры) [40001]", 		"value": 0 },
            { "name":"modbus.BVV.r40002", 	"title":"Выходное напряжение канала 2 [40002]", 	"value": 0 },
            { "name":"modbus.BVV.r40003", 	"title":"Выходное напряжение канала 3 [40003]", 	"value": 0 },
            { "name":"modbus.BVV.r40004", 	"title":"Выходное напряжение канала 4 [40004]", 	"value": 0 },

            { "name":"display.temp.t_nv",		"title":"Температура наружного воздуха",	"value": 0 },
            { "name":"display.temp.t_sal",		"title":"Температура салона",			"value": 0 },
            { "name":"display.temp.t_pr",		"title":"Температура приточного воздуха",       "value": 0 },
            { "name":"display.temp.t_kotl",		"title":"Температура котла",			"value": 0 },
            { "name":"display.temp.t_ust",		"title":"Температура уставки",			"value": 0 },

            { "name":"display.BVV.u3000",		"title":"Напруга 3000В",                        "value": 0 },
            { "name":"display.BVV.VVO_1",		"title":"ВВО 1гр",                              "value": 0 },
            { "name":"display.BVV.VVO_2",		"title":"ВВО 2гр",                              "value": 0 },
            { "name":"display.BVV.NVO",                 "title":"NVO",                                  "value": 0 },
            { "name":"display.BVV.generator",           "title":"Вн. мережа 380В/генератор",		"value": 0 },
            { "name":"display.BVV.automode",		"title":"Автоматичний режим",                   "value": 0 },
            { "name":"display.BVV.crash",		"title":"Аварiя",                               "value": 0 },
            { "name":"display.BVV.elEquipmentOn",	"title":"ЕО включене",				"value": 0 },
            { "name":"display.BVV.condFailure",         "title":"Кондицiонер ВIДМОВА",			"value": 0 },
            { "name":"display.BVV.cont2Failure",	"title":"Вiдмова контура охолодження 2",	"value": 0 },
            { "name":"display.BVV.cont1Failure",	"title":"Вiдмова контура охолодження 1",	"value": 0 },
            { "name":"display.BVV.condWorked",          "title":"Кондицiонер РОБОТА",			"value": 0 },
            { "name":"display.BVV.cooling",		"title":"Охолодження",                          "value": 0 },
            { "name":"display.BVV.heater",		"title":"Калорифер",                            "value": 0 },
            { "name":"display.BVV.umax_zrk",		"title":"Umax ЗРК",                             "value": 0 },
            { "name":"display.BVV.r_insulation",	"title":"R iзоляцiї < 1 kOm",                   "value": 0 },

            { "name":"display.U_I.I_bat",               "title":"Ток АКБ [30005]",			"value": 0 },
            { "name":"display.U_I.I_gen",               "title":"Ток генератора [30006]",		"value": 0 },
            { "name":"display.U_I.U_net",               "title":"Напряжение сети [30007]",		"value": 0 },

            { "name":"display.d30028.version",		"title":"Версия встроенного ПО БВВ",            "value": 0 },
            { "name":"display.d30028.year",		"title":"Год прошивки",                         "value": 0 },
            { "name":"display.d30028.month",		"title":"Месяц прошивки",			"value": 0 },
            { "name":"display.d30028.day",		"title":"День прошивки",			"value": 0 },

            { "name":"display.out.VVO1",                "title":"",		"value": 0 },
            { "name":"display.out.VVO2",                "title":"",		"value": 0 },
            { "name":"display.out.pump_heater",         "title":"",		"value": 0 },
            { "name":"display.out.NVO",                 "title":"",		"value": 0 },
            { "name":"display.out.alarm",               "title":"",		"value": 0 }
        ],
	"functions":[
                {
                    "name":"testArchive",
                    "sources":["sys.time.curent"],
                    "processing":
"
display.temp.t_sal.setData(     display.temp.t_sal.data()   +10);
display.temp.t_pr.setData(      display.temp.t_pr.data()    +10);
display.temp.t_nv.setData(      display.temp.t_nv.data()    +10);
display.temp.t_kotl.setData(    display.temp.t_kotl.data()  +10);

display.U_I.I_bat.setData(      display.U_I.I_bat.data()    +10);
display.U_I.I_gen.setData(      display.U_I.I_gen.data()    +10);
display.U_I.U_net.setData(      display.U_I.U_net.data()    +10);

archive(1, 50);
archive(2, 50);
archive(3, 50);
archive(4, 50);
archive(5, 50);
archive(6, 50);
archive(7, 50);
"
                },
                {
                        "name":"setT_sal",
                        "sources":["modbus.BVV.device","modbus.BVV.r30002", "modbus.Tsal.device", "modbus.Tsal.r30000"],
                        "processing":"
if (settings.temp.useBVV.data()==1) {
    if (modbus.BVV.device.data()==1) {
        display.temp.t_sal.setData(
        settings.offset.cmc.data() *
        (modbus.BVV.r30002.data()/settings.offset.oc.data())
       + settings.offset.tc.data() );
    } else {
       display.temp.t_sal.setData( 0 );
    }
} else {
    if (modbus.Tsal.device.data()==1) {
        display.temp.t_sal.setData(
        settings.offset.cmc.data() *
        (modbus.Tsal.r30000.data()/settings.offset.oc.data())
       + settings.offset.tc.data() );
    } else {
       display.temp.t_sal.setData( 0 );
    }
}
                        "
                },
		{
			"name":"setT_pr",
                        "sources":["modbus.BVV.device","modbus.BVV.r30003","modbus.Tpr.device","modbus.Tpr.r30000"],
                        "processing":"
if (settings.temp.useBVV.data()==1) {
    if (modbus.BVV.device.data()==1) {
        display.temp.t_pr.setData(
        settings.offset.cmf.data() *
        (modbus.BVV.r30003.data()/settings.offset.oc.data())
       + settings.offset.af.data() );
    } else {
       display.temp.t_pr.setData( 0 );
    }
} else {
    if (modbus.Tpr.device.data()==1) {
        display.temp.t_pr.setData(
        settings.offset.cmf.data() *
        (modbus.Tpr.r30000.data()/settings.offset.oc.data())
       + settings.offset.af.data() );
    } else {
       display.temp.t_pr.setData( 0 );
    }
}
                        "
		},
		{
			"name":"setT_nv",
                        "sources":["modbus.BVV.device","modbus.BVV.r30004","modbus.Tnv.device","modbus.Tnv.r30000"],
                        "processing":"
if (settings.temp.useBVV.data()==1) {
    if (modbus.BVV.device.data()==1) {
        display.temp.t_nv.setData(
        settings.offset.cmo.data() *
        (modbus.BVV.r30004.data()/settings.offset.oc.data())
       + settings.offset.to.data() );
    } else {
       display.temp.t_nv.setData( 0 );
    }
} else {
    if (modbus.Tnv.device.data()==1) {
        display.temp.t_nv.setData(
        settings.offset.cmo.data() *
        (modbus.Tnv.r30000.data()/settings.offset.oc.data())
       + settings.offset.to.data() );
    } else {
       display.temp.t_nv.setData( 0 );
    }
}
                        "
		},
                {
                        "name":"setT_kotl",
                        "sources":["modbus.BVV.device","modbus.BVV.r30005","modbus.Tkotl.device","modbus.Tkotl.r30000"],
                        "processing":"
if (settings.temp.useBVV.data()==1) {
    if (modbus.BVV.device.data()==1) {
        display.temp.t_kotl.setData(
        settings.offset.cmb.data() *
        (modbus.BVV.r30005.data()/settings.offset.oc.data())
       + settings.offset.tb.data() );
    } else {
       display.temp.t_kotl.setData( 0 );
    }
} else {
    if (modbus.Tkotl.device.data()==1) {
        display.temp.t_kotl.setData(
        settings.offset.cmb.data() *
        (modbus.Tkotl.r30000.data()/settings.offset.oc.data())
       + settings.offset.tb.data() );
    } else {
       display.temp.t_kotl.setData( 0 );
    }
}
                        "
                },
                {
                        "name":"set_I_bat",
                        "sources":["modbus.BVV.device","modbus.BVV.r30006"],
                        "processing":"
if (modbus.BVV.device.data()==1) {
        display.U_I.I_bat.setData(
        settings.offset.cmi.data() *
        (modbus.BVV.r30006.data()/settings.offset.oc.data())
       + settings.offset.cb.data() );
} else {
       display.U_I.I_bat.setData( 0 );
}
                        "
                },
                {
                        "name":"set_I_gen",
                        "sources":["modbus.BVV.device","modbus.BVV.r30007"],
                        "processing":"
if (modbus.BVV.device.data()==1) {
        display.U_I.I_gen.setData(
        settings.offset.cmg.data() *
        (modbus.BVV.r30007.data()/settings.offset.oc.data())
       + settings.offset.cg.data() );
} else {
       display.U_I.I_gen.setData( 0 );
}
                        "
                },
                {
                        "name":"set_U_net",
                        "sources":["modbus.BVV.device","modbus.BVV.r30008"],
                        "processing":"
if (modbus.BVV.device.data()==1) {
        display.U_I.U_net.setData(
        settings.offset.cmv.data() *
        (modbus.BVV.r30008.data()/settings.offset.oc.data())
       + settings.offset.nv.data() );
} else {
       display.U_I.U_net.setData( 0 );
}
                        "
                },
                {
			"name":"set_u3000",
			"sources":["modbus.BVV.device","modbus.BVV.r30000"],
                        "processing":"
                        if(modbus.BVV.device.data()==1)
                        {
                            display.BVV.u3000.setData((modbus.BVV.r30000.data()&1)>0);
                        } else {
                            display.BVV.u3000.setData(0);
                        }
                        "
		},
		{
			"name":"set_VVO_1",
			"sources":["modbus.BVV.device","modbus.BVV.r30000"],
                        "processing":"if(modbus.BVV.device.data()==1){ display.BVV.VVO_1.setData((modbus.BVV.r30000.data()&2)>0); }else{ display.BVV.VVO_1.setData(0); }"
		},
		{
			"name":"set_VVO_2",
			"sources":["modbus.BVV.device","modbus.BVV.r30000"],
                        "processing":"if(modbus.BVV.device.data()==1){ display.BVV.VVO_2.setData((modbus.BVV.r30000.data()&4)>0); }else{ display.BVV.VVO_2.setData(0); }"
		},
		{
			"name":"set_NVO",
			"sources":["modbus.BVV.device","modbus.BVV.r30000"],
                        "processing":"if(modbus.BVV.device.data()==1){ display.BVV.NVO.setData((modbus.BVV.r30000.data()&8)>0); }else{ display.BVV.NVO.setData(0); }"
		},
		{
			"name":"set_generator",
			"sources":["modbus.BVV.device","modbus.BVV.r30000"],
                        "processing":"if(modbus.BVV.device.data()==1){ display.BVV.generator.setData((modbus.BVV.r30000.data()&16)>0); }else{ display.BVV.generator.setData(0); }"
		},
		{
			"name":"set_automode",
			"sources":["modbus.BVV.device","modbus.BVV.r30000"],
                        "processing":"if(modbus.BVV.device.data()==1){ display.BVV.automode.setData((modbus.BVV.r30000.data()&32)>0); }else{ display.BVV.automode.setData(0); }"
		},
		{
			"name":"set_crash",
			"sources":["modbus.BVV.device","modbus.BVV.r30000"],
                        "processing":"if(modbus.BVV.device.data()==1){ display.BVV.crash.setData((modbus.BVV.r30000.data()&64)>0); }else{ display.BVV.crash.setData(0); }"
		},
		{
			"name":"set_elEquipmentOn",
			"sources":["modbus.BVV.device","modbus.BVV.r30000"],
                        "processing":"if(modbus.BVV.device.data()==1){ display.BVV.elEquipmentOn.setData((modbus.BVV.r30000.data()&128)>0); }else{ display.BVV.elEquipmentOn.setData(0); }"
		},
		{
			"name":"set_condFailure",
			"sources":["modbus.BVV.device","modbus.BVV.r30000"],
                        "processing":"if(modbus.BVV.device.data()==1){ display.BVV.condFailure.setData((modbus.BVV.r30000.data()&256)>0); }else{ display.BVV.condFailure.setData(0); }"
		},
		{
			"name":"set_cont2Failure",
			"sources":["modbus.BVV.device","modbus.BVV.r30000"],
                        "processing":"if(modbus.BVV.device.data()==1){ display.BVV.cont2Failure.setData((modbus.BVV.r30000.data()&512)>0); }else{ display.BVV.cont2Failure.setData(0); }"
		},
		{
			"name":"set_cont1Failure",
			"sources":["modbus.BVV.device","modbus.BVV.r30000"],
                        "processing":"if(modbus.BVV.device.data()==1){ display.BVV.cont1Failure.setData((modbus.BVV.r30000.data()&1024)>0); }else{ display.BVV.cont1Failure.setData(0); }"
		},
		{
			"name":"set_condWorked",
			"sources":["modbus.BVV.device","modbus.BVV.r30000"],
                        "processing":"if(modbus.BVV.device.data()==1){ display.BVV.condWorked.setData((modbus.BVV.r30000.data()&2048)>0); }else{ display.BVV.condWorked.setData(0); }"
		},
		{
			"name":"set_cooling",
			"sources":["modbus.BVV.device","modbus.BVV.r30000"],
                        "processing":"if(modbus.BVV.device.data()==1){ display.BVV.cooling.setData((modbus.BVV.r30000.data()&4096)>0); }else{ display.BVV.cooling.setData(0); }"
		},
		{
			"name":"set_heater",
			"sources":["modbus.BVV.device","modbus.BVV.r30000"],
                        "processing":"if(modbus.BVV.device.data()==1){ display.BVV.heater.setData((modbus.BVV.r30000.data()&8192)>0); }else{ display.BVV.heater.setData(0); }"
		},
		{
			"name":"set_umax_zrk",
			"sources":["modbus.BVV.device","modbus.BVV.r30000"],
                        "processing":"if(modbus.BVV.device.data()==1){ display.BVV.umax_zrk.setData((modbus.BVV.r30000.data()&16384)>0); }else{ display.BVV.umax_zrk.setData(0); }"
		},
		{
			"name":"set_r_insulation",
			"sources":["modbus.BVV.device","modbus.BVV.r30000"],
                        "processing":"if(modbus.BVV.device.data()==1){ display.BVV.r_insulation.setData((modbus.BVV.r30000.data()&32768)>0); }else{ display.BVV.r_insulation.setData(0); }"
		},          
		{
			"name":"set_version",
			"sources":["modbus.BVV.device","modbus.BVV.r30028"],
			"processing":"if(modbus.BVV.device.data()==1){ display.d30028.version.setData(modbus.BVV.r30028.data()); }else{ display.d30028.version.setData(0); }"
		},
		{
			"name":"set_version_year",
			"sources":["modbus.BVV.device","modbus.BVV.r30029"],
			"processing":"if(modbus.BVV.device.data()==1){ display.d30028.year.setData(modbus.BVV.r30029.data()); }else{ display.d30028.year.setData(0); }"
		},
		{
			"name":"set_version_month",
			"sources":["modbus.BVV.device","modbus.BVV.r30030"],
			"processing":"if(modbus.BVV.device.data()==1){ display.d30028.month.setData(modbus.BVV.r30030.data()); }else{ display.d30028.month.setData(0); }"
		},
		{
			"name":"set_version_day",
			"sources":["modbus.BVV.device","modbus.BVV.r30031"],
			"processing":"if(modbus.BVV.device.data()==1){ display.d30028.day.setData(modbus.BVV.r30031.data()); }else{ display.d30028.day.setData(0); }"
		}		                
	]
}
